!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(n.stags={})}(this,function(n){"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function r(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function e(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},u=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(u=u.concat(Object.getOwnPropertySymbols(e).filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),u.forEach(function(t){r(n,t,e[t])})}return n}function u(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=[],e=!0,u=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(e=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);e=!0);}catch(n){u=!0,i=n}finally{try{e||null==a.return||a.return()}finally{if(u)throw i}}return r}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var i=function(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),e=1;e<t;e++)r[e-1]=arguments[e];if(0==r.length)throw new Error("You must provide an initial value and a non-empty spread of functions.");return r.reduce(function(n,t){return t(n)},n)},o=function(n){return function(t){return n.reduce(function(n,e){return Object.assign(n,r({},e,t))},{})}},a=function(n,t){return n>0?function(n,t){return Array(n).fill(t)}(n,t).join(""):""};function c(n,t){var r=Object(t)===t,e=null==t,u=r&&Array.isArray(t),i=r&&!u,o=r&&"function"==typeof t,a=!r,c=i&&t.type&&g(t),f=c&&"value"in t,s=c&&!f;return n({notPrimative:r,isPrimative:a,isString:"string"==typeof t,isNil:e,isArray:u,isObject:i,isPojo:i&&"Object"==t.constructor.name,isDate:i&&t instanceof Date,isError:i&&t instanceof Error,value:t,isFunction:o,isStag:c,valueStag:f,emptyStag:s})}var f=function(n){return c(function n(t){return function(r){var e=r.value,o=r.isPojo,f=r.isObject,s=r.isArray,l=r.isDate,p=r.isError,y=r.valueStag,v=r.emptyStag,h=r.isString,m=r.isFunction,d=a(t,""),b=a(t-1,""),T=a(t+1,"");return y?e.type+"."+g(e)+"("+(void 0===e.value?"":c(n(t+1),e.value))+(t>0?""+b:"")+d+")":v?e.type+"."+g(e)+"()":o?0==Object.keys(e).length?"{}":i(e,Object.entries,function(r){return r.map(function(r){var e=u(r,2),i=e[0],o=e[1];return T+'"'+i+'":'+c(n(t+1),o).replace(""+T,"")})},function(n){return d+"{"+n+d+"}"}):s?"0"==e.length?"[]":d+"["+d+d+e.map(function(r){return c(n(t+1),r)}).join(", ")+d+"]":l?"new "+e.constructor.name+'("'+e.toISOString()+'")':p?"new "+e.constructor.name+'("'+e.message+'")':m?e+"":f?"new "+e.constructor.name+"()":h?JSON.stringify(e):""+e}}(0),n)};function s(){return f(this)}function l(n){return n.type}function g(n){return"tag"in n?n.tag:n.case}var p=r({toString:s,inspect:s},Symbol.for("nodejs.util.inspect.custom"),s);function y(n,t,r){return Object.assign(Object.create(p),{type:n,tag:t,value:r})}function v(n,t){return Object.assign(Object.create(p),{type:n,tag:t})}var h=function(n){return n.reduce(function(n,t){var i=u(t,2);return e({},n,r({},i[0],i[1]))},{})},m=["ExtraTags","MissingTags","InstanceNull","InstanceWrongType","InstanceShapeInvalid","VisitorNotAFunction","NotAType","TagsShapeInvalid"].reduce(function(n,t){return n[t]=function(r){return y(n.type,t,r)},n.tags.push(t),n},{type:"StaticSumTypeError",tags:[],specs:{}});function d(n){return n.tags}var b={ExtraTags:function(n){return["Your tag function must have exactly the same"," keys as the type: "+n.T.type+". ","The following tags should not have been present:",n.extraKeys.join(", ")].join(" ")},MissingTags:function(n){return["Your tag function must have exactly the same","keys as the type: "+n.T.type+". The following keys were","missing:",n.missingKeys.join(", ")].join(" ")},InstanceNull:function(n){return"Null is not a valid member of the type "+n.T.type},InstanceWrongType:function(n){return[f(n.x)+" is not a valid member of the type",n.T.type,"which expects the following tags",d(n.T).join(" | ")].join(" ")},InstanceShapeInvalid:function(n){return[f(n.x),"is not a valid Member of the type:",n.T.type+". ","Please review the definition of "+n.T.type].join(" ")},VisitorNotAFunction:function(n){return n.context+" expected a visitor function  but instead received "+f(n.visitor)},NotAType:function(n){return n.context+" expected a Type ({ type: string, tags: string[] }) but received "+f(n.T)},TagsShapeInvalid:function(n,t){return"fold("+l(n)+") tags provided were not the right shape.  Expected { [tag]: f } but received "+f(t)}};function T(n){var r=n();return O("fold",r),function(n){!function(n,r){if(null==r||Array.isArray(r)||"object"!==t(r)){var e=N.TagsShapeInvalid(n,r);return j(e)}}(r,n);var e=Object.keys(n),u=d(r),i=[[e,r],[u,n]].map(function(n){var t=n[0],r=n[1];return t.filter(function(n){return!(n in r)})}),o=i[0],a=i[1];return a.length>0?j(N.MissingTags({T:r,tags:n,missingKeys:a})):o.length>0?j(N.ExtraTags({T:r,tags:n,extraKeys:o})):function(t){return A(r,n,t)&&n[g(t)](t.value)}}}var S=function(n){return(t=b,function(n){return t[g(n)](n.value)})(n);var t};function j(n){throw new Error(g(n)+": "+S(n))}var N=m;function O(n,t){if(null==t||!(null!=t&&"string"==typeof t.type&&Array.isArray(t.tags)&&"specs"in t))return j(N.NotAType({context:n,T:t}))}function x(n){if("function"!=typeof n.visitor)return j(N.VisitorNotAFunction({context:n.context,visitor:n.visitor}))}function w(n,t){if(null==t||l(t)!=n.type||!d(n).includes(g(t)))return j(N.InstanceShapeInvalid({x:t,T:n}))}function A(n,t,r){return null==r?j(N.InstanceNull({T:n,tags:t,x:r})):l(r)!==n.type?j(N.InstanceWrongType({T:n,tags:t,x:r})):!!d(n).includes(g(r))||j(N.InstanceShapeInvalid({T:n,tags:t,x:r}))}function I(n){return T(function(){return n})}var Y=function(n){var t=I(n);return function(r){var e=t(r);return function(t){w(n,t);var r=e(t);return n[g(t)](r)}}},E=function(n){var t=I(n);return function(r){var e=t(r);return function(t){if(A(n,r,t),"value"in t){var u=e(t);return A(n,r,u)&&u}return t}}},W=function(n,t){return e({type:n,specs:{},tags:t},h(t.map(function(t){return[t,function(){return arguments.length?y(n,t,arguments.length<=0?void 0:arguments[0]):v(n,t)}]})))};function B(n){return W(n,["Y","N"])}var P=B("stags.Either"),M=function(n){var t=I(n),e=n.specs["stags/bifunctor"],u=e.left,i=e.right;return function(n,e){var o;return t((r(o={},u,n),r(o,i,e),o))}},k=function(n){return O("bifold",n),M(n)},C=function(n){return O("bimap",n),function(n){var t=Y(n),e=n.specs["stags/bifunctor"],u=e.left,i=e.right;return function(n,e){var o;return t((r(o={},u,n),r(o,i,e),o))}}(n)},F=function(n){return O("getOr",n),function(t){return function(r){return w(n,r),function(n){return function(t){return M(n)(function(){return t},function(n){return n})}}(n)(t)(r)}}},D=function(n){return O("concatWith",n),function(t){return x({context:"concatWith",visitor:t}),function(r){return w(n,r),function(e){return w(n,e),function(n){return function(t){return function(r){return function(e){var u=n.specs["stags/bifunctor"],i=u.left,o=u.right;return g(r)==i?r:g(e)==i?e:n[o](t(r.value)(e.value))}}}}(n)(t)(r)(e)}}}},K=function(n){var t=n.left,r=n.right;return function(n){return n.specs["stags/bifunctor"]={left:t,right:r},n.left=function(r){return n[t](r)},n.right=function(t){return n[r](t)},n.bifold=k(n),n.bimap=C(n),n.getOr=F(n),n.getWith=function(n){return function(t,r){return k(n)(function(){return t},function(n){return r(n)})}}(n),n.tagBy=function(n){return I(n),function(t,r){return function(e){return x({context:"tagBy",visitor:r}),r(e)?n.right(e):n.left(t)}}}(n),n.encase=function(n){return function(t){return function(r){try{return n.right(t(r))}catch(t){return n.left(t)}}}}(n),n.toBoolean=function(n){return n.bifold(function(){return!1},function(){return!0})}(n),n.fromNullable=function(n){return function(t){return null==t?n.left(t):n.right(t)}}(n),n.all=function(n){return function(t){var r=t.filter(function(t){return!n.toBoolean(t)});return r.length>0?n.left(r.map(function(n){return n.value})):n.right(t.map(n.getOr(null)))}}(n),n.any=function(n){return function(t){return t.some(n.toBoolean)?n.right(t.filter(n.toBoolean).map(n.getOr(null))):t.find(function(t){return!n.toBoolean(t)})}}(n),n.concatWith=D(n),n}};function V(n){if(n.specs["stags/decorated"])return n;var t=o(d(n)),u=Y(n),i=E(n),a=I(n);return d(n).forEach(function(o){n["is"+o]=n["is"+o]||function(t){return w(n,t),g(t)===o},n["map"+o]=n["map"+o]||function(n){return u(e({},t(function(n){return n}),r({},o,n)))},n["get"+o+"Or"]=n["get"+o+"Or"]||function(n){return a(e({},t(function(){return n}),r({},o,function(n){return n})))},n["get"+o+"With"]=n["get"+o+"With"]||function(n,u){return a(e({},t(function(){return n}),r({},o,function(n){return u(n)})))},n["chain"+o]=n["chain"+o]||function(n){return function(u){return i(e({},t(function(){return u}),r({},o,n)))(u)}},n["assert"+o]=n["assert"+o]||a(e({},t(P.N),r({},o,P.Y))),n[o.toLowerCase()+"s"]=n[o+"s"]||function(t){return t.reduce(function(t,r){return t.concat(n["is"+o](r)?[r.value]:[])},[])}}),n.fold=n.fold||a,n.mapAll=n.mapAll||u,n.chainAll=n.chainAll||i,n.specs["stags/decorated"]=!0,n}var J=function(n){return i(B(n),V,K({left:"N",right:"Y"}),(t="Y",function(n){return n.specs["stags/functor"]=t,n.of=n[t],n.map=function(u){return x({context:"map",visitor:u}),Y(n)(e({},o(n.tags)(function(n){return n}),r({},t,u)))},n}),function(n){return function(t){t.specs["stags/monad"]=n,t.of=t[n];var u=E(t);return t.chain=function(i){return x({context:"chain",visitor:i}),function(a){return u(e({},o(t.tags)(function(n){return t[g(a)](n)}),r({},n,function(n){return i(n)})))(a)}},t}}("Y"));var t},_=function(n){return i(n,J,function(n){var t=n.N;return n.N=function(){return t()},n.specs["stags/maybe"]=!0,n})},L=J("stags.Either"),q=L.Y,z=L.N,G=L.bifold,H=L.getOr,Q=L.getWith,R=L.bimap,U=L.map,X=L.mapY,Z=L.mapN,$=L.assertY,nn=L.assertN,tn=L.chainN,rn=L.chainY,en=L.tagBy,un=L.chain,on=L.toBoolean,an=L.encase,cn=L.fromNullable,fn=L.all,sn=L.any,ln=L.isY,gn=L.isN,pn=L.ys,yn=L.ns,vn=L.concatWith,hn=g,mn=d,dn=y,bn=v,Tn=_("stags.Maybe");n.fold=I,n.Y=q,n.N=z,n.bifold=G,n.getOr=H,n.getWith=Q,n.bimap=R,n.map=U,n.mapY=X,n.mapN=Z,n.assertY=$,n.assertN=nn,n.chainN=tn,n.chainY=rn,n.tagBy=en,n.chain=un,n.toBoolean=on,n.encase=an,n.fromNullable=cn,n.all=fn,n.any=sn,n.isY=ln,n.isN=gn,n.ys=pn,n.ns=yn,n.concatWith=vn,n.either=J,n.maybe=_,n.Either=L,n.valueInstance=y,n.emptyInstance=v,n.toString=f,n.toJSON=function(n){return c(function n(t){var r=t.value,e=t.isPojo,u=t.isArray,i=t.valueStag,o=t.emptyStag;return i?c(n,r.value):o?null:e?h(Object.entries(r).map(function(t){return c(n,t)})):u?r.map(function(t){return c(n,t)}):r},n)},n.otherwise=o,n.tagName=g,n.typeName=l,n.getTags=d,n.pipe=function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];if(0==t.length)throw new Error("You must provide a non-empty spread of functions.");return function(n){return i.apply(void 0,[n].concat(t))}},n.run=i,n.tags=function(n,t){return V(W(n,t))},n.decorate=V,n.mapAll=Y,n.chainAll=E,n.errMessage=S,n.StaticSumTypeError=m,n.boundToString=s,n.caseName=hn,n.getCases=mn,n.valueCaseInstance=dn,n.emptyCaseInstance=bn,n.sameCase=function(n,t){return g(n)===g(t)},n.tagged=function(n){return function(t){return W(n,Object.keys(t))}},n.Maybe=Tn,Object.defineProperty(n,"__esModule",{value:!0})});
//# sourceMappingURL=stags.min.js.map
